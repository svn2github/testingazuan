<?xml version="1.0" encoding="ISO-8859-1"?>
<STATEMENTS>
	
	<!-- NON STANDARD SQL STATEMENTS -->
		<!--
		<STATEMENT name="SELECT_LIST_MODALITIES_VALUE" 
  	query="SELECT T.LOV_ID AS ID,
                  T.LABEL AS LABEL,
  	              T.NAME AS NAME,
  	              T.DESCR AS DESCRIPTION,
  	              T.INPUT_TYPE_CD AS TYPE,
  	              (SELECT COUNT(DISTINCT(P.PAR_ID)) FROM SBI_PARUSE P WHERE P.LOV_ID = T.LOV_ID) AS N_OF_PARAMETERS
  	       FROM SBI_LOV T 
		   ORDER BY LABEL,NAME,DESCRIPTION"/>
		   
		   	<STATEMENT name="SELECT_LIST_PARAMETERS" 
                query="SELECT P.PAR_ID AS ID, 
       						P.DESCR AS DESCRIPTION, 
       						P.LENGTH AS LENGTH,
       						P.LABEL AS LABEL,
       						P.NAME AS NAME,
						    P.PAR_TYPE_CD AS TYPE,
       						P.MASK AS MASK,	
       						P.PAR_TYPE_ID AS TYPE_ID,
						(SELECT COUNT(*) FROM SBI_PARUSE U WHERE P.PAR_ID = U.PAR_ID) AS NUM_USES,
						(SELECT COUNT(DISTINCT(BIOBJ_ID)) FROM SBI_OBJ_PAR O WHERE P.PAR_ID = O.PAR_ID) AS NUM_BIOBJECTS
						FROM SBI_PARAMETERS P
                       ORDER BY LABEL, NAME, DESCRIPTION"/>
                       
        <STATEMENT name="SELECT_LIST_MODALITIES" 
  	query="SELECT U.USE_ID AS USEID,
							U.PAR_ID AS ID,
							U.LOV_ID AS LOV_ID,
							U.LABEL AS LABEL,
							U.NAME AS NAME,
							U.DESCR AS DESCRIPTION,
							U.MAN_IN AS MANUAL_INPUT,
							(SELECT COUNT(*) FROM SBI_PARUSE_DET  P WHERE P.USE_ID = U.USE_ID) AS ROLES 
							FROM SBI_PARUSE U
							WHERE U.PAR_ID = ? "/>
    -->
    <STATEMENT name="SELECT_LIST_MODALITIES_VALUE" 
  	query="SELECT T.LOV_ID AS ID,
T.LABEL AS LABEL,
T.NAME AS NAME,
T.DESCR AS DESCRIPTION,
T.INPUT_TYPE_CD AS TYPE,
COUNT(DISTINCT(P.PAR_ID)) AS N_OF_PARAMETERS
FROM SBI_LOV T, SBI_PARUSE P
WHERE P.LOV_ID = T.LOV_ID
GROUP BY T.LOV_ID,T.LABEL,T.LABEL, T.NAME,T.DESCR,T.INPUT_TYPE_CD
UNION
SELECT T.LOV_ID AS ID,
T.LABEL AS LABEL,
T.NAME AS NAME,
T.DESCR AS DESCRIPTION,
T.INPUT_TYPE_CD AS TYPE,
0 AS N_OF_PARAMETERS
FROM SBI_LOV T
WHERE T.LOV_ID NOT IN (SELECT DISTINCT(P.PAR_ID) FROM SBI_PARUSE P)
ORDER BY LABEL,NAME,DESCRIPTION"/>
		   
		   <STATEMENT name="SELECT_LIST_PARAMETERS" 
                query="SELECT P.PAR_ID AS ID,
P.DESCR AS DESCRIPTION,
P.LENGTH AS LENGTH,
P.LABEL AS LABEL,
P.NAME AS NAME,
P.PAR_TYPE_CD AS TYPE,
P.MASK AS MASK,
P.PAR_TYPE_ID AS TYPE_ID,
COUNT(U.PAR_ID) as NUM_USES, COUNT(DISTINCT(O.BIOBJ_ID)) as NUM_BIOBJECTS
FROM SBI_PARAMETERS P, SBI_PARUSE U, SBI_OBJ_PAR O
WHERE U.PAR_ID = P.PAR_ID
and O.PAR_ID = P.PAR_ID
group by P.PAR_ID, P.DESCR, P.LENGTH,P.LABEL,P.NAME,P.PAR_TYPE_CD,P.MASK, P.PAR_TYPE_ID
UNION
SELECT P.PAR_ID AS ID,
P.DESCR AS DESCRIPTION,
P.LENGTH AS LENGTH,
P.LABEL AS LABEL,
P.NAME AS NAME,
P.PAR_TYPE_CD AS TYPE,
P.MASK AS MASK,
P.PAR_TYPE_ID AS TYPE_ID,
COUNT(U.PAR_ID) as NUM_USES, 0 as NUM_BIOBJECTS
FROM SBI_PARAMETERS P, SBI_PARUSE U
WHERE U.PAR_ID = P.PAR_ID
and P.PAR_ID NOT IN (SELECT DISTINCT(PAR_ID) FROM SBI_OBJ_PAR)
group by P.PAR_ID, P.DESCR, P.LENGTH,P.LABEL,P.NAME,P.PAR_TYPE_CD,P.MASK, P.PAR_TYPE_ID
ORDER BY LABEL, NAME, DESCRIPTION"/>
                       
        <STATEMENT name="SELECT_LIST_MODALITIES" 
  	query="SELECT U.USE_ID AS USEID,
							U.PAR_ID AS ID,
							U.LOV_ID AS LOV_ID,
							U.LABEL AS LABEL,
							U.NAME AS NAME,
							U.DESCR AS DESCRIPTION,
							U.MAN_IN AS MANUAL_INPUT,
							FROM SBI_PARUSE U
							WHERE U.PAR_ID = ? "/>
		   
  <!-- NON STANDARD SQL STATEMENTS -->
	
	<!-- TEST -->
	 		
	<STATEMENT name="SELECT_CHECKED_OBJECT_LIST" 
  				query="SELECT SUB_RPT_ID AS OBJ_ID  					 					
				FROM SBI_SUBREPORTS
				WHERE MASTER_RPT_ID = ?"/>
	
	<!-- TEST -->
	
	
	<STATEMENT reportname="SELECT_USEID_FROM_PARUSE" 
               query="SELECT 
						P.USE_ID AS USE_ID        
						FROM        
						SBI_PARUSE P        
						WHERE P.PAR_ID = ? AND P.LOV_ID = ? "/>
	<STATEMENT name="SELECT_USEID_FROM_LABEL" 
               query="SELECT 
						P.USE_ID AS USE_ID        
						FROM        
						SBI_PARUSE P        
						WHERE P.LABEL = ? AND P.PAR_ID = ? "/>					
  	<STATEMENT name="INSERT_CHECK" 
               query="INSERT INTO 
						SBI_CHECKS (VALUE_TYPE_ID,VALUE_TYPE_CD,VALUE_1,VALUE_2,LABEL,DESCR)
						VALUES (?,?,?,?,?,?)"/>
	<STATEMENT name="UPDATE_CHECK" 
               query="UPDATE SBI_CHECKS SET 
                      	VALUE_TYPE_ID=?,
                      	VALUE_TYPE_CD=?,
                      	VALUE_1=?,
                      	VALUE_2=?,
                      	LABEL=?,
                      	DESCR=?
                      WHERE CHECK_ID = ?"/>
  	<STATEMENT name="DELETE_CHECK" query="DELETE FROM SBI_CHECKS WHERE CHECK_ID = ?"/>
  	<STATEMENT name="SELECT_ENGINE" 
               query="SELECT 	ENGINE_ID AS ID, 
       						ENCRYPT AS CRIPTABLE, 
       						NAME AS NAME,
       						DESCR AS DESCRIPTION,
       						MAIN_URL AS URL,
       						SECN_URL AS SECURL,
       						OBJ_UPL_DIR AS UPLDIR,
       						OBJ_USE_DIR AS USEDIR,	
       						DRIVER_NM AS DRIVER_NAME
					FROM SBI_ENGINES 
					WHERE ENGINE_ID = ?"/>
	<STATEMENT name="SELECT_ALL_ENGINE" 
               query="SELECT 	ENGINE_ID AS ID, 
       						ENCRYPT AS CRIPTABLE, 
       						NAME AS NAME,
       						DESCR AS DESCRIPTION,
       						MAIN_URL AS URL,
       						SECN_URL AS SECURL,
       						OBJ_UPL_DIR AS UPLDIR,
       						OBJ_USE_DIR AS USEDIR	
					FROM SBI_ENGINES"/>
					
	<STATEMENT name="UPDATE_ENGINE" 
               query="UPDATE SBI_ENGINES SET 
                      	DESCR = ?, 
                      	MAIN_URL = ?, 
                      	SECN_URL = ?, 
                      	OBJ_UPL_DIR = ?, 
                      	OBJ_USE_DIR=?, 
                      	ENCRYPT = ?, 
                      	NAME = ?,  
                      	DRIVER_NM = ?
                      WHERE ENGINE_ID = ?"/>
                      
    <STATEMENT name="INSERT_ENGINE" 
               query="INSERT INTO SBI_ENGINES (ENCRYPT, NAME, DESCR, MAIN_URL, SECN_URL, OBJ_UPL_DIR, OBJ_USE_DIR,DRIVER_NM) 
                      VALUES (?, ?, ?, ?, ?, ?, ?,?) "/>
  
  
    <STATEMENT name="DELETE_ENGINE" query="DELETE FROM SBI_ENGINES WHERE ENGINE_ID = ?"/>
  
  
     <STATEMENT name="SELECT_LIST_ENGINE" 
                query="SELECT 	E.ENGINE_ID AS ID, 
                       			E.DESCR AS DESCRIPTION,
                       			E.NAME AS NAME,
                       			E.LABEL AS LABEL  
                       FROM SBI_ENGINES E
                       ORDER BY LABEL,NAME,DESCRIPTION"/>
  	<STATEMENT name="SELECT_PARAMETERS" 
               query="SELECT 	PAR_ID AS ID, 
       						DESCR AS DESCRIPTION, 
       						LENGTH AS LENGTH,
       						LABEL AS LABEL,
       						PAR_TYPE_CD AS TYPE,
       						MASK AS MASK,	
       						PAR_TYPE_ID AS TYPE_ID	
					FROM SBI_PARAMETERS 
					WHERE PAR_ID = ?"/>
					
	<STATEMENT name="SELECT_ALL_PARAMETERS"
				query="SELECT 	PAR_ID AS ID, 
       						DESCR AS DESCRIPTION, 
       						LENGTH AS LENGTH,
       						LABEL AS LABEL,
       						PAR_TYPE_CD AS TYPE,
       						MASK AS MASK,	
       						PAR_TYPE_ID AS TYPE_ID	
					FROM SBI_PARAMETERS"/> 
  
  
  
	<STATEMENT name="UPDATE_PARAMETERS" 
               query="UPDATE SBI_PARAMETERS SET 
                      	DESCR = ?, 
                      	LENGTH = ?, 
                      	LABEL = ?, 
                      	PAR_TYPE_CD =?, 
                      	MASK = ?, 
                      	PAR_TYPE_ID = ?
                        WHERE PAR_ID = ?"/>
  
	<STATEMENT name="INSERT_PARAMETERS" 
               query="INSERT INTO SBI_PARAMETERS (DESCR, LENGTH, LABEL, PAR_TYPE_CD, MASK,PAR_TYPE_ID ) 
                      VALUES (?, ?, ?, ?, ?, ?) "/>  
    
    <STATEMENT name="DELETE_PARAMETERS" 
    		   query="DELETE FROM SBI_PARAMETERS WHERE PAR_ID = ?"/>
    		   
    <STATEMENT name="SELECT_FUNCTIONALITY_BY_PATH" 
         	   query="SELECT FUNCT_ID AS ID,	
         	                 DESCR AS DESCRIPTION, 
         	                 NAME AS NAME,
         	                 FUNCT_TYPE_ID AS IDTYPE,
         	                 FUNCT_TYPE_CD AS CDTYPE  	
					  FROM SBI_FUNCTIONS 
					  WHERE PATH = ?"/>
  
    <STATEMENT name="SELECT_LOW_FUNCTIONALITY_BY_PATH" 
         	   query="SELECT FUNCT_ID AS ID,	
         	                 DESCR AS DESCRIPTION, 
         	                 NAME AS NAME,
         	                 PATH AS PATH,
         	                 CODE AS CODE   	
					  FROM SBI_FUNCTIONS 
					  WHERE PATH = ?"/>
	
	<STATEMENT name="SELECT_LOW_FUNCTIONALITY_BY_ID" 
         	   query="SELECT FUNCT_ID AS ID,	
         	                 DESCR AS DESCRIPTION, 
         	                 NAME AS NAME,
         	                 PATH AS PATH,
         	                 CODE AS CODE   	
					  FROM SBI_FUNCTIONS 
					  WHERE FUNCT_ID = ?"/>
					  
    <STATEMENT name="SELECT_ROLES_OF_THE_LOW_FUNCTIONALITY" 
         	   query="SELECT ROLE_ID AS IDROLE, 
         	                 STATE_CD AS CDSTATE, 
         	                 STATE_ID AS IDSTATE 
                      FROM SBI_FUNC_ROLE 
                      WHERE FUNCT_ID = ?"/>
                      
    <STATEMENT name="INSERT_LOWFUNCTIONALITY" 
               query="INSERT INTO SBI_FUNCTIONS (NAME, DESCR, PATH, FUNCT_TYPE_ID, FUNCT_TYPE_CD, CODE ) 
                      VALUES (?, ?, ?, ?, ?, ?) "/>
                      
    <STATEMENT name="UPDATE_LOWFUNCTIONALITY" 
               query="UPDATE SBI_FUNCTIONS SET 
                      	NAME = ?, 
                      	DESCR = ?, 
                      	CODE = ?
                        WHERE FUNCT_ID = ?"/>  
                      
     <STATEMENT name="INSERT_LOWFUNCTIONALITY_ROLES" 
               query="INSERT INTO SBI_FUNC_ROLE (ROLE_ID, FUNCT_ID, STATE_ID, STATE_CD ) 
                      VALUES (?, ?, ?, ?) "/>  
  
     <STATEMENT name="DELETE_ROLES_FUNCTIONALITY" 
               query="DELETE FROM SBI_FUNC_ROLE WHERE FUNCT_ID = ?"/>
     
     <STATEMENT name="DELETE_FUNCTIONALITY" 
               query="DELETE FROM SBI_FUNCTIONS WHERE FUNCT_ID = ?"/>
  
  
		   
	<STATEMENT name="SELECT_PARAMETERS_LIST" 
  	query="SELECT PAR_ID AS PAR_ID,
                  LABEL AS LABEL,
  	              NAME AS NAME,
  	              DESCR AS DESCRIPTION,
  	              PAR_TYPE_CD AS TYPE
  	       FROM SBI_PARAMETERS
		   ORDER BY LABEL,NAME,DESCRIPTION "/>
		   


	
	<STATEMENT name="SELECT_REPORTS_LIST" 
  	query="	SELECT 	BIOBJ_ID AS OBJ_ID,
  					DESCR AS DESCRIPTION,
  					LABEL AS LABEL,
  					NAME AS NAME   					
			FROM SBI_OBJECTS
			ORDER BY LABEL,NAME,DESCRIPTION "/>
	<!--  		
	<STATEMENT name="SELECT_SUBREPORTS_LIST" 
  	query="	SELECT 	MASTER_RPT_ID AS MASTER_ID,
  					SUB_RPT_ID AS SUBREPORT_ID  					 					
			FROM SBI_SUBREPORTS
			WHERE MASTER_RPT_ID = ?"/>
			
	<STATEMENT name="SELECT_SUBREPORT_PATH" 
  	query="	SELECT 	BIOBJ_ID AS OBJ_ID,
  					PATH AS PATH  					 					
			FROM SBI_OBJECTS
			WHERE BIOBJ_ID = ?"/>   

	<STATEMENT name="DELETE_SUBREPORTS" 
	query="DELETE FROM SBI_SUBREPORTS 
		   WHERE MASTER_RPT_ID = ?"/> 
		   
	<STATEMENT name="DELETE_SUBREPORTS_BY_SUBRPTID" 
	query="DELETE FROM SBI_SUBREPORTS 
		   WHERE SUB_RPT_ID = ?"/> 	   
 
 	 <STATEMENT name="INSERT_SUBREPORTS" 
               query="INSERT INTO SBI_SUBREPORTS (MASTER_RPT_ID, SUB_RPT_ID) 
                      VALUES (?, ?) "/>  
 
 	-->
 
 
 
 
 
 
  	<STATEMENT name="SELECT_PREDEFINED_CHECKS" 
  	query="SELECT T.CHECK_ID AS ID,
       		T.LABEL AS LABEL,
       		T.NAME AS NAME,
       		T.DESCR AS DESCRIPTION,
       		T.VALUE_TYPE_CD AS CONTROLTYPE
			FROM SBI_CHECKS T,
     		SBI_DOMAINS D
				WHERE D.DOMAIN_CD='PRED_CHECK'
				AND T.VALUE_TYPE_CD = D.VALUE_CD
				ORDER BY LABEL,NAME,DESCRIPTION"/>
 	<STATEMENT name="SELECT_LIST_MODALITIES_CHECKS" 
  	query="SELECT T.CHECK_ID AS ID,
       		T.LABEL AS LABEL,
       		T.NAME AS NAME,
       		T.DESCR AS DESCRIPTION,
       		T.VALUE_TYPE_CD AS CONTROLTYPE
			FROM SBI_CHECKS T,
     		SBI_DOMAINS D
				WHERE D.DOMAIN_CD='CHECK'
				AND T.VALUE_TYPE_CD = D.VALUE_CD
				ORDER BY LABEL"/>
    <STATEMENT name="SELECT_ALL_CHECKS"
				query="SELECT 	CHECK_ID AS ID, 
       						VALUE_TYPE_ID AS VALUE_TYPE_ID,
       						VALUE_TYPE_CD AS CHECK_TYPE,
       						VALUE_1 AS FIRST_VALUE,
       						VALUE_2 AS SECOND_VALUE,
       						LABEL AS LABEL,
       						NAME AS NAME,
       						DESCR AS DESCRIPTION
					FROM SBI_CHECKS"/> 
	<STATEMENT name="SELECT_CHECKS_BY_ID"
				query="SELECT 	CHECK_ID AS ID, 
       						VALUE_TYPE_ID AS VALUE_TYPE_ID,
       						VALUE_TYPE_CD AS CHECK_TYPE,
       						VALUE_1 AS FIRST_VALUE,
       						VALUE_2 AS SECOND_VALUE,
       						LABEL AS LABEL,
       						NAME AS NAME,
       						DESCR AS DESCRIPTION
					FROM SBI_CHECKS WHERE CHECK_ID = ?"/> 
					
   <STATEMENT name="SELECT_CHECK_REFERENCES"
				query="SELECT USE_ID, CHECK_ID,PROG	
					FROM SBI_PARUSE_CK WHERE CHECK_ID = ?"/>
   
    <STATEMENT name="SELECT_MODALITIES_VALUE" 
  	query="SELECT LOV_ID AS ID,
                  LABEL AS LABEL,
                  NAME AS NAME,
  	              DESCR AS DESCRIPTION,
  	              LOV_PROVIDER AS LOV_PROVIDER,
  	              INPUT_TYPE_CD AS INPUT_TYPE_CD,
  	              INPUT_TYPE_ID AS INPUT_TYPE_ID
  	       FROM SBI_LOV  
		   WHERE LOV_ID = ? "/>
  
  	<STATEMENT name="SELECT_ALL_MODALITIES_VALUE" 
  	query="SELECT LOV_ID AS ID,
                  LABEL AS LABEL,
                  NAME AS NAME,
  	              DESCR AS DESCRIPTION,
  	              LOV_PROVIDER AS LOV_PROVIDER,
  	              INPUT_TYPE_CD AS INPUT_TYPE_CD,
  	              INPUT_TYPE_ID AS INPUT_TYPE_ID
  	       FROM SBI_LOV "/>
  	
  	
  	<STATEMENT name="UPDATE_MODALITIES_VALUE" 
               query="UPDATE SBI_LOV SET 
                      	LABEL = ?, 
                      	DESCR = ?, 
                      	LOV_PROVIDER =?, 
                      	INPUT_TYPE_CD = ?,
                      	INPUT_TYPE_ID = ?
                        WHERE LOV_ID = ?"/>
  
  
  	<STATEMENT name="INSERT_MODALITIES_VALUE" 
               query="INSERT INTO SBI_LOV (LABEL, DESCR, LOV_PROVIDER, INPUT_TYPE_CD, INPUT_TYPE_ID ) 
                      VALUES (?, ?, ?, ?, ?) "/>  
    
  	
  	<STATEMENT name="DELETE_MODALITIES_VALUE" 
    query="DELETE FROM SBI_LOV WHERE LOV_ID = ?"/>
    
    
 	<STATEMENT name="SELECT_LIST_MODALITIES_VALUE_DETAILS" 
  	query="SELECT T.VALUE_CD AS INPUT_TYPE_CD,
  	              T.VALUE_ID AS INPUT_TYPE_ID
  	       FROM SBI_DOMAINS T
  	       WHERE VALUE_CD = ? AND DOMAIN_CD = 'INPUT_TYPE'"/> 
  
  
   <STATEMENT name="SELECT_LIST_DOMAINS" 
  	query="SELECT T.VALUE_NM AS VALUE_NAME,
  	              T.VALUE_ID AS VALUE_ID,
  	              T.VALUE_CD AS VALUE_CD
  	       FROM SBI_DOMAINS T
  	       WHERE DOMAIN_CD = ? "/>
  
  <STATEMENT name="SELECT_ALL_MODALITY_VALUES_ORDER_BY_CODE" 
  	query="SELECT LOV_ID AS ID,
                  LABEL AS LABEL,
                  NAME AS NAME,
  	              DESCR AS DESCRIPTION,
  	              INPUT_TYPE_CD AS INPUT_TYPE_CD
  	       FROM SBI_LOV 
  	       ORDER BY INPUT_TYPE_CD"/>
  
 
  
  <STATEMENT name="SELECT_ROLES_FOR_PARUSE"
  			query="SELECT 
  					T.EXT_ROLE_ID AS ID_EXT_ROLE
  					FROM 
  					SBI_PARUSE P,
  					SBI_PARUSE_DET T
  					WHERE P.USE_ID = ?
  					AND P.USE_ID = T.USE_ID"/>
  					
  <STATEMENT name="SELECT_CHECKS_FOR_PARUSE"
  			query="SELECT 
  					T.CHECK_ID AS ID_CHECK
  					FROM 
  					SBI_PARUSE P,
  					SBI_PARUSE_CK T
  					WHERE P.USE_ID = ?
  					AND P.USE_ID = T.USE_ID"/>
  
  <STATEMENT name="SELECT_PARAMETER_USE_DETAIL" 
  	query="SELECT P.USE_ID AS USE_ID,
  				  P.PAR_ID AS ID, 
  				  P.LOV_ID AS ID_LOV, 
  				  P.LABEL AS NAME, 
  				  P.DESCR AS DESCRIPTION,
  				  P.MAN_IN AS MANUAL_INPUT
				  FROM 
				  SBI_PARUSE P 
				  WHERE P.PAR_ID = ? AND P.LOV_ID = ?"/> 
	
	
	<STATEMENT name="SELECT_PARAMETER_USE_MODE_BY_PAR_ID" 
  	query="SELECT P.USE_ID AS USE_ID,
  				  P.PAR_ID AS ID, 
  				  P.LOV_ID AS ID_LOV, 
  				  P.LABEL AS LABEL, 
  				  P.NAME AS NAME, 
  				  P.DESCR AS DESCRIPTION,
  				  P.MAN_IN AS MANUAL_INPUT
				  FROM 
				  SBI_PARUSE P 
				  WHERE P.PAR_ID = ? "/>    
	
	<STATEMENT name="SELECT_PARAMETER_USE_MODE_BY_LOV_ID" 
  	query="SELECT P.USE_ID AS USE_ID,
  				  P.PAR_ID AS ID, 
  				  P.LOV_ID AS ID_LOV, 
  				  P.LABEL AS LABEL, 
  				  P.NAME AS NAME, 
  				  P.DESCR AS DESCRIPTION
				  FROM 
				  SBI_PARUSE P 
				  WHERE P.LOV_ID = ? "/>   
				   
	<STATEMENT name="SELECT_PARAMETER_USE_DETAIL_BY_USEID" 
  			   query="SELECT 
  			      P.USE_ID AS USE_ID,
  				  P.PAR_ID AS ID, 
  				  P.LOV_ID AS ID_LOV, 
  				  P.LABEL AS LABEL 
  				  P.NAME AS NAME, 
  				  P.DESCR AS DESCRIPTION,
  				  P.MAN_IN AS MANUAL_INPUT
				  FROM 
				  SBI_PARUSE P 
				  WHERE P.USE_ID=?"/> 
				  
  <STATEMENT name="INSERT_PARUSE" 
  	 query="INSERT INTO SBI_PARUSE (PAR_ID,LOV_ID,LABEL,DESCR)
			VALUES (?,?,?,?)"/>			  
  <STATEMENT name="INSERT_PARAMETER_USE" 
  	 query="INSERT INTO SBI_PARAMETER_USE (PAR_ID,EXT_ROLE_ID,PROG,END_DT,START_DT,LOV_ID,CHECK_ID,LABEL,DESCR)
			VALUES (?,?,?,?,?,?,?,?,?)"/>			  
				  
   <!-- SQL FOR ROLE -->
 <STATEMENT name="SELECT_ROLE_BY_NAME" 
               query="SELECT EXT_ROLE_ID,  
       						NAME,
       						DESCR,
       						CODE,
       						ROLE_TYPE_ID,
       						ROLE_TYPE_CD
					FROM SBI_EXT_ROLES 
					WHERE NAME = ?"/>
					
	<STATEMENT name="SELECT_ROLE_BY_ID"
				query="SELECT EXT_ROLE_ID,  
       						NAME,
       						DESCR,
       						CODE,
       						ROLE_TYPE_ID,
       						ROLE_TYPE_CD
					FROM SBI_EXT_ROLES 
					WHERE EXT_ROLE_ID = ?"/>
					
	<STATEMENT name="SELECT_ALL_ROLES" 
               query="SELECT EXT_ROLE_ID,  
       						NAME,
       						DESCR,
       						CODE,
       						ROLE_TYPE_ID,
       						ROLE_TYPE_CD
					FROM SBI_EXT_ROLES"/>
					
	<STATEMENT name="SELECT_DOMAIN_BY_ROLE_ID" 
               query="SELECT * FROM SBI_DOMAINS WHERE VALUE_ID = ?"/>
	
	<STATEMENT name="SELECT_FUNCT_BY_ROLE_ID" 
               query="SELECT * FROM SBI_FUNC_ROLE WHERE ROLE_ID = ?"/>
	<!--
	<STATEMENT name="SELECT_ALL_FREE_ROLES_FOR_DETAIL" 
               query="SELECT EXT_ROLE_ID,  
       						NAME,
       						DESCR,
       						CODE,
       						ROLE_TYPE_ID,
       						ROLE_TYPE_CD
					FROM SBI_EXT_ROLES
					WHERE EXT_ROLE_ID NOT IN
				    (SELECT EXT_ROLE_ID FROM
				    		SBI_PARUSE_DET PUD,
	     					SBI_PARUSE PU
	     					WHERE PU.PAR_ID = ? AND PU.LOV_ID != ?
             				AND PU.USE_ID = PUD.USE_ID)"/>
    -->                  
    <STATEMENT name="SELECT_ALL_FREE_ROLES_FOR_DETAIL" 
               query="SELECT EXT_ROLE_ID,  
       						NAME,
       						DESCR,
       						CODE,
       						ROLE_TYPE_ID,
       						ROLE_TYPE_CD
					FROM SBI_EXT_ROLES
					WHERE EXT_ROLE_ID NOT IN
				    (SELECT EXT_ROLE_ID FROM
				    		SBI_PARUSE_DET PUD,
	     					SBI_PARUSE PU
	     					WHERE PU.PAR_ID = ? AND PU.LABEL != ?
             				AND PU.USE_ID = PUD.USE_ID)"/> 
     
     
     
	<STATEMENT name="SELECT_ALL_FREE_ROLES_FOR_INSERT" 
               query="SELECT EXT_ROLE_ID,
               					NAME,
       						 DESCR,
       						 CODE,
       						 ROLE_TYPE_ID,
       						 ROLE_TYPE_CD
					FROM SBI_EXT_ROLES
					WHERE EXT_ROLE_ID NOT IN
					(SELECT EXT_ROLE_ID FROM
							SBI_PARUSE_DET PUD,
							SBI_PARUSE PU
							WHERE PU.PAR_ID = ? AND PU.USE_ID = PUD.USE_ID)"/>
       						                 
    <STATEMENT name="INSERT_ROLE" 
               query="INSERT INTO SBI_EXT_ROLES(NAME, DESCR, CODE, ROLE_TYPE_ID, ROLE_TYPE_CD) 
                      VALUES (?, ?, ?, ?, ?) "/>
 
 	<STATEMENT name="DELETE_ROLE" 
 				query="DELETE FROM SBI_EXT_ROLES WHERE EXT_ROLE_ID = ?"/>

	<STATEMENT name="FIND_DOMAIN_VALUE_ID_GIVEN_DOMAIN_CODE_AND_VALUE_CODE" 
 				query="SELECT VALUE_ID  FROM SBI_DOMAINS WHERE VALUE_CD= ? AND DOMAIN_CD= ? "/>
	<!--  ANDREA ZOPPELLO (BEGIN )-->
	<STATEMENT name="SELECT_BIOBJ" 
 				query="SELECT BIOBJ_ID, ENGINE_ID, DESCR, LABEL, ENCRYPT, REL_NAME, STATE_ID, STATE_CD, BIOBJ_TYPE_CD, BIOBJ_TYPE_ID, PATH
						FROM SBI_OBJECTS WHERE BIOBJ_ID = ?"/>

	<STATEMENT name="SELECT_BIOBJ_BY_ENGINE_ID" 
 				query="SELECT *
						FROM SBI_OBJECTS WHERE ENGINE_ID = ?"/>
	
	<STATEMENT name="SELECT_BIOBJ_BYPATH"
				query="SELECT BIOBJ_ID, ENGINE_ID, DESCR, LABEL, ENCRYPT, REL_NAME, STATE_ID, STATE_CD, BIOBJ_TYPE_CD, BIOBJ_TYPE_ID, PATH
						FROM SBI_OBJECTS WHERE UPPER(PATH) = ?"/>
						
	<STATEMENT name="INSERT_BIOBJ"
				query="INSERT INTO SBI_OBJECTS 
						(ENGINE_ID, 
                        DESCR, 
                        LABEL, 
                        ENCRYPT, 
                        REL_NAME, 
                        STATE_ID, 
                        STATE_CD, 
                        BIOBJ_TYPE_CD, 
                        BIOBJ_TYPE_ID,PATH) VALUES (?,?,?,?,?,?,?,?,?,?)"/>
                        
    <STATEMENT name="UPDATE_BIOBJ" 
               query="UPDATE SBI_OBJECTS SET 
                      	ENGINE_ID = ?, 
                      	DESCR = ?, 
                      	LABEL =?,
                      	ENCRYPT = ?,
                      	REL_NAME = ?,
                      	STATE_ID = ?,
                      	STATE_CD = ?,
                      	BIOBJ_TYPE_CD = ?,
                      	BIOBJ_TYPE_ID = ?,
                      	PATH = ?
                      WHERE BIOBJ_ID = ? "/>
                        
	<STATEMENT name="SELECT_ALL_BI_OBJECT_PARAMETERS_FOR_BI_OBJECT"
				query="SELECT R.PAR_ID AS PAR_ID, 
							R.BIOBJ_ID AS BIOBJ_ID, 
							R.LABEL AS LABEL, 
							R.REQ_FL AS REQ_FL, 
							R.MOD_FL AS MOD_FL, 
							R.VIEW_FL AS VIEW_FL, 	
							R.MULT_FL AS MULT_FL, 
							R.PROG AS PROG, 
							R.PARURL_NM AS PARURL_NM,
							P.LABEL AS PARLABEL, 
							P.NAME AS PARNAME, 
							P.PAR_TYPE_CD AS PARTYPE
							FROM SBI_OBJ_PAR R, SBI_PARAMETERS P
							WHERE R.BIOBJ_ID=? AND
							P.PAR_ID=R.PAR_ID
							ORDER BY PARLABEL,PARNAME "/>
					
	
	<STATEMENT name="SELECT_BI_OBJECT_PARAMETER_DETAIL"
				query="SELECT PAR_ID, 
							BIOBJ_ID, 
							LABEL, 
							REQ_FL, 
							MOD_FL, 
							VIEW_FL, 
							MULT_FL, 
							PROG, 
							PARURL_NM
							FROM SBI_OBJ_PAR
							WHERE BIOBJ_ID=? AND PAR_ID = ?"/>
	
	<STATEMENT name="SELECT_BI_OBJECT_PARAMETER_BY_PAR_ID"
				query="SELECT PAR_ID, 
							BIOBJ_ID, 
							LABEL, 
							REQ_FL, 
							MOD_FL, 
							VIEW_FL, 
							MULT_FL, 
							PROG, 
							PARURL_NM
							FROM  SBI_OBJ_PAR
							WHERE PAR_ID = ?"/>
	
	
	
	
	
	
	
	<STATEMENT name="UPDATE_BI_OBJECT_PARAMETER"
				query=" UPDATE SBI_OBJ_PAR SET 
							PAR_ID = ?,
							LABEL = ?, 
							REQ_FL = ?, 
							MOD_FL = ? ,
							VIEW_FL = ? ,
							MULT_FL = ? ,
							PROG = 1 ,
							PARURL_NM = ?
						
							WHERE BIOBJ_ID=? AND PAR_ID = ?"/>
	
							
	<STATEMENT name="INSERT_BI_OBJECT_PARAMETER"
				query="INSERT INTO SBI_OBJ_PAR (PAR_ID, BIOBJ_ID, LABEL, REQ_FL, MOD_FL, VIEW_FL, MULT_FL, PROG, PARURL_NM)
								 VALUES (?,?,?,?,?,?,?,1,?)"/>
	
	<STATEMENT name="DELETE_BIOBJ" 
 				query="DELETE FROM SBI_OBJECTS WHERE BIOBJ_ID=?"/>
 				
	<STATEMENT name="DELETE_BI_OBJECT_PARAMETER" 
 				query="DELETE FROM SBI_OBJ_PAR WHERE PAR_ID=? AND BIOBJ_ID=?"/>
	<!--  ANDREA ZOPPELLO (END)-->
  
    <STATEMENT name="DELETE_BIOBJ_BIPARAMETERS" 
 				query="DELETE FROM SBI_OBJ_PAR WHERE BIOBJ_ID=?"/>
  
   <STATEMENT name="INSERT_PARUSE_DET" 
  	 query="INSERT INTO SBI_PARUSE_DET (USE_ID, EXT_ROLE_ID, PROG)
			VALUES (?, ?, ?)"/>					  
    <STATEMENT name="INSERT_PARUSE_CK" 
  	 query="INSERT INTO SBI_PARUSE_CK (USE_ID, CHECK_ID)
			VALUES (?, ?)"/>	
    
    
    
    <STATEMENT name="SELECT_DOMAIN_FROM_CODE_VALUE" 
  	           query="SELECT D.VALUE_NM AS VALUE_NAME,
  	                         D.VALUE_ID AS VALUE_ID,
  	                         D.VALUE_CD AS VALUE_CD
  	                  FROM SBI_DOMAINS D
  	                  WHERE DOMAIN_CD = ? AND VALUE_CD = ? "/>
  
  <STATEMENT name="UPDATE_PARUSE" 
               query="UPDATE SBI_PARUSE SET 
                      	LABEL = ?, 
                      	DESCR =? 
                        WHERE PAR_ID = ? AND LOV_ID = ?"/>
  
  <STATEMENT name="UPDATE_PARUSE_DET" 
               query="UPDATE SBI_PARUSE_DET SET 
                      	LOV_ID = ?, 
                      	EXT_ROLE_ID = ?, 
                      	CHECK_ID =?,
                      	START_DT = ?,
                      	PROG = ?,
                      	END_DATE = ? 
                        WHERE PAR_ID = ? AND LOV_ID = ?"/>
  
  <STATEMENT name="SELECT_ID_LOV_OLD" 
               query=	"SELECT LOV_ID AS ID_LOV_OLD
               			 FROM SBI_PARUSE
                         WHERE PAR_ID = ?"/>
  
  <STATEMENT name="DELETE_PARUSE_ID_LOV_OLD" 
               query=	"DELETE FROM SBI_PARUSE
                         WHERE PAR_ID = ? AND LOV_ID = ?"/>
                         
   <STATEMENT name="DELETE_PARUSE_DET_ID_LOV_OLD" 
               query=	"DELETE FROM SBI_PARUSE_DET                          
							WHERE 
							SBI_PARUSE_DET.USE_ID = ?"/>
	<STATEMENT name="DELETE_PARUSE_CK" 
               query=	"DELETE FROM SBI_PARUSE_CK                          
							WHERE 
							SBI_PARUSE_CK.USE_ID = ?"/>
							
	<STATEMENT name="UPDATE_PAR_USE"
				query="UPDATE  SBI_PARUSE
						SET PAR_ID=?, 
							LOV_ID=?,
							LABEL=?,
							DESCR=? 
						WHERE
							USE_ID=?"/> 
    
    <STATEMENT name="DELETE_PARUSE" 
               query=	"DELETE FROM SBI_PARUSE
                         WHERE USE_ID=?"/>   
                      
                                           
                         
                         
     <STATEMENT name="SELECT_PARAMETER_USE_FROM_IDPAR_IDROLE" 
               query="SELECT 
							PARUSE.USE_ID AS USE_ID,
							PARUSE.LOV_ID AS LOV_ID
					   FROM 
							SBI_PARUSE PARUSE,
							SBI_PARUSE_DET PARUSEDET
					   WHERE 
							PARUSE.PAR_ID = ? 
							AND PARUSEDET.EXT_ROLE_ID = ?
							AND PARUSE.USE_ID = PARUSEDET.USE_ID"/>  
  
  
      <STATEMENT name="SELECT_PARAMETERS_FROM_REPORT_PATH" 
               query="SELECT PAR.PAR_ID AS IDPARAM      
                      FROM SBI_OBJECTS OB, 
                           SBI_OBJ_PAR OBPAR,
                           SBI_PARAMETERS PAR
                      WHERE OB.PATH = ? 
                        AND OBPAR.BIOBJ_ID = OB.BIOBJ_ID 
                        AND OBPAR.PAR_ID = PAR.PAR_ID "/>  
                    
      <STATEMENT name="SELECT_PARAUSES_FROM_ROLE_AND_PARAMETER" 
               query="SELECT 
               				PARUSEDET.USE_ID
    					FROM 
    						SBI_EXT_ROLES ROL,
            				SBI_PARUSE_DET PARUSEDET,
	    					SBI_PARUSE PARUSE 
       					WHERE ROL.NAME = ?
             				AND PARUSEDET.EXT_ROLE_ID = ROL.EXT_ROLE_ID
             				AND PARUSE.PAR_ID = ?
	     					AND PARUSEDET.USE_ID = PARUSE.USE_ID"/>  
  
   	   <STATEMENT name="SELECT_FUNCTIONALITY_FROM_CODE" 
         	   query="SELECT FUNCT_ID AS ID,	
         	                 DESCR AS DESCRIPTION, 
         	                 NAME AS NAME,
         	                 FUNCT_TYPE_ID AS IDTYPE,
         	                 FUNCT_TYPE_CD AS CDTYPE  	
					  FROM SBI_FUNCTIONS 
					  WHERE CODE = ?"/>
  
  
</STATEMENTS>
